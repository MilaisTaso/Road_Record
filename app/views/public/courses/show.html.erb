<div class="row">
  <div class="col-10 mx-auto">
    <div class="col-10 mx-auto mb-4" id="show-title">
      <h1 class=" text-white text-center pt-2 shadow-sm">コース詳細</h2>
    </div>
    <div class="swiper mx-auto" style="width:700px">
      <div class="swiper-wrapper">
        <% @course.course_images.each do |image| %>
        <div class="swiper-slide">
          <%= image_tag image, size:"700x400" %>
        </div>
        <% end %>
      </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    </div>
    <div class="bg-white col-10 mx-auto py-2 mt-4">
      <div class="row justify-content-start col-12 mx-auto mt-4 align-items-end border-bottom pb-2">
        <div class="col-8">
          <h3><%= @course.title %></h3>
          <p class="text-muted mb-0"><%= @course.address%>(<%= @course.distance%>Km)</p>
        </div>
        <div class="col-4">
          <%= link_to user_path(@course.user), class:"text-secondary" do %>
            <%= image_tag @course.user.user_image.variant(gravity: "Center", resize: "50x50!", crop: "50x50+0+0").processed,
            class:"user-icon" %>
            <%= @course.user.name %>
          <% end %>
        </div>
      </div>
      <div class="col-11 mx-auto d-flex">
        <table class="table table-borderless mt-2">
          <tr>
            <th class="table-secondary">おすすめの時間帯:</th>
            <th><%= @course.suggest_time_i18n%></th>
          </tr>
          <th class="p-1"></th>
          <tr>
            <th class="table-secondary">信号の有無:</th>
            <th><%= @course.signal_condition_i18n%></th>
          </tr>
        </table>
        <table class="table table-borderless mt-2">
          <tr>
            <th class="table-secondary">交通量:</th>
            <th><%= @course.traffic_volume_i18n%></th>
          </tr>
          <th class="p-1"></th>
          <tr>
            <th class="table-secondary">勾配:</th>
            <th><%= @course.is_slope_i18n%></th>
          </tr>
        </table>
      </div>
      <div class="row">
      <div class="col-6  row mx-auto">
        <div id="favorite_<%= @course.id %>" class="mr-4">
          <%= render 'public/favorites/button', course: @course %>
        </div>
        <div id="finish_<%= @course.id %>">
          <%= render 'public/finishes/button', course:@course %>
        </div>
      </div>
        <% if @course.user == current_user %>
        <div class="col-4 d-flex px-0">
          <div class="mr-3">
            <%= link_to '編集', edit_course_path(@course), class:"btn btn-success btn-sm" %>
          </div>
          <div>
            <%= link_to '消去', course_path(@course), method: :delete, class:"btn btn-danger btn-sm", "data-confirm" => "本当に消去しますか?"%>
          </div>
        </div>
      <% end %>
      </div>
    </div>
      <div id="map" class="mx-auto mt-4"></div>
      <div class="col-9 mx-auto mt-4 h5">詳細情報:</div>
      <div class="col-9 bg-white mx-auto py-3 px-2">
        <%= safe_join(@course.introduction.split("\n"), tag(:br))%>
      </div>
      <div class="col-9 mx-auto mt-4">
        <%= render 'public/comments/form', course: @course,  comment: @comment %>
      </div>
      <% if @course.comments.present? %>
      <div class="col-10 mx-auto mt-4">
        <%= render 'public/comments/index', course: @course %>
      </div>
      <% end %>
    </div>
  </div>
</div>
<div id="position_info" data-json="<%= @course.positions.to_json %>"></div>
<%= javascript_pack_tag 'public/show' %>
